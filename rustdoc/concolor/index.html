<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Control console coloring across all dependencies"><meta name="keywords" content="rust, rustlang, rust-lang, concolor"><title>concolor - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../concolor/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../concolor/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate concolor</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.0.8</li><li><a id="all-types" href="all.html">All Items</a></li></div></ul><section><div class="block"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></div></section><div id="sidebar-vars" data-name="concolor" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../concolor/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">concolor</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/concolor/lib.rs.html#1-105">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Control console coloring across all dependencies</p>
<h2 id="motivation"><a href="#motivation">Motivation</a></h2>
<p>Detecting a terminal’s color capabilities and passing it down to each writer
can be obnoxious.  Some crates try to make this easier by detecting the environment for you and
making their own choice to print colors.  As an application author, you own the experience for
your application and want the behavior to be consistent.  To get this, you have to dig into
each crate’s implementation to see how they auto-detect color capabilities and, if they don’t
do it how you want, hope they provide a way to override it so you can implement it yourself.</p>
<p>Like with logging, your terminal’s capabilities and how to treat it is a behavior that cuts
across your application.  So to make things more consistent and easier to control,
<code>concolor</code> introduces shared detection logic that all crates can call into to get
consistent behavior.  The application author can then choose what feature flags are enabled to
decide on what the end-user experience should be.</p>
<h2 id="bins"><a href="#bins"><code>[[bin]]</code>s</a></h2><div class="example-wrap"><pre class="language-toml"><code>[dependencies]
concolor = { version = &quot;0.0.8&quot;, features = &quot;color&quot; }</code></pre></div>
<p>Notes:</p>
<ul>
<li>With the
<a href="https://doc.rust-lang.org/nightly/edition-guide/rust-2021/default-cargo-resolver.html">2021 edition / <code>resolver = &quot;2&quot;</code></a>,
you will also need to specify this in your <code>build-dependencies</code> if you want <code>build.rs</code> to have color
as well.</li>
</ul>
<p>If you are providing a command line option for controlling color, just call</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">when</span> <span class="op">=</span> <span class="ident">concolor::ColorChoice::Always</span>;
<span class="ident">concolor::set</span>(<span class="ident">when</span>);</code></pre></div>
<p>See also <a href="https://docs.rs/concolor-clap"><code>concolor-clap</code></a></p>
<h2 id="libs"><a href="#libs"><code>[lib]</code>s</a></h2>
<p>The <code>[[bin]]</code> is responsible for defining the policy of how colors are determined, so to depend
on <code>concolor</code>:</p>
<div class="example-wrap"><pre class="language-toml"><code>[dependencies]
concolor = { version = &quot;0.0.8&quot;, default-features = false }</code></pre></div>
<p>At times, you might want to provide a convenience feature for color support, so you could also:</p>
<div class="example-wrap"><pre class="language-toml"><code>[features]
default = [&quot;color&quot;]
color = &quot;concolor/auto&quot;

[dependencies]
concolor = { version = &quot;0.0.8&quot;, optional = True}</code></pre></div>
<p>Notes:</p>
<ul>
<li>Your choice on whether to make this default or not</li>
<li>Depending on your context, name it either <code>color</code> (for a crate like <code>clap</code>) or <code>auto</code> (for a
crate like <code>termcolor</code>)</li>
</ul>
<p>Then just ask as needed:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">stdout_support</span> <span class="op">=</span> <span class="ident">concolor::get</span>(<span class="ident">concolor::Stream::Stdout</span>);
<span class="kw">if</span> <span class="ident">stdout_support</span>.<span class="ident">ansi_color</span>() {
    <span class="comment">// Output ANSI escape sequences</span>
    <span class="kw">if</span> <span class="ident">stdout_support</span>.<span class="ident">truecolor</span>() {
        <span class="comment">// Get even fancier with the colors</span>
    }
} <span class="kw">else</span> <span class="kw">if</span> <span class="ident">stdout_support</span>.<span class="ident">color</span>() {
    <span class="comment">// Legacy Windows version, control the console as needed</span>
} <span class="kw">else</span> {
    <span class="comment">// No coloring</span>
}</code></pre></div>
<h2 id="features"><a href="#features">Features</a></h2>
<ul>
<li><code>auto</code>: Guess color status based on all possible sources, including:
<ul>
<li><code>api_unstable</code>: Allow controlling color via the API (until 1.0, this is not guaranteed to
work across crates which is why this is <code>_unstable</code>)</li>
<li><code>interactive</code>: Check if stdout/stderr is a TTY</li>
<li><code>clicolor</code>: Respect <a href="https://bixense.com/clicolors/">CLICOLOR</a> spec</li>
<li><code>no_color</code>: Respect <a href="https://no-color.org/">NO_COLOR</a> spec</li>
<li><code>term</code>: Check <code>TERM</code></li>
<li><code>windows</code>: Check if we can enable ANSI support</li>
</ul>
</li>
</ul>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Color.html" title="concolor::Color struct">Color</a></div><div class="item-right docblock-short"><p>Current color state for a <a href="enum.Stream.html" title="crate::Stream"><code>Stream</code></a></p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ColorChoice.html" title="concolor::ColorChoice enum">ColorChoice</a></div><div class="item-right docblock-short"><p>Selection for overriding color output with [<code>set</code>][crate::set]</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Stream.html" title="concolor::Stream enum">Stream</a></div><div class="item-right docblock-short"><p>Output stream to <a href="fn.get.html" title="crate::get"><code>get()</code></a> the <a href="struct.Color.html" title="crate::Color"><code>Color</code></a> state for</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.get.html" title="concolor::get fn">get</a></div><div class="item-right docblock-short"><p>Get the current <a href="struct.Color.html" title="Color"><code>Color</code></a> state for a given <a href="enum.Stream.html" title="crate::Stream"><code>Stream</code></a></p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="concolor" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0-nightly (c84f39e6c 2022-03-20)" ></div>
</body></html>